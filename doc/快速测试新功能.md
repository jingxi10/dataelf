# 快速测试新功能指南

## 前提条件

确保项目已经启动：
```bash
docker-compose up -d
# 或
mvn spring-boot:run (后端)
npm run dev (前端)
```

---

## 1. 测试Logo上传功能 (2分钟)

### 步骤：

1. **创建管理员账号**（如果还没有）
   ```sql
   -- 连接数据库
   mysql -u dataelf -p ai_data_platform
   
   -- 设置某个用户为管理员
   UPDATE users SET role = 'ADMIN' WHERE email = 'your_email@example.com';
   ```

2. **登录管理后台**
   - 访问: http://localhost:5173/login
   - 使用管理员账号登录

3. **上传Logo**
   - 点击左侧菜单"管理后台"
   - 点击"系统设置"
   - 切换到"Logo设置"标签页
   - 拖拽或点击上传一张Logo图片（JPG/PNG，< 5MB）
   - 等待上传成功提示

4. **验证效果**
   - 刷新首页: http://localhost:5173/
   - 查看左上角Logo是否显示

### 预期结果：
✅ Logo上传成功  
✅ 首页显示新Logo  
✅ Logo图片清晰可见

---

## 2. 测试系统配置功能 (1分钟)

### 步骤：

1. **修改网站信息**
   - 在"系统设置" > "基本设置"
   - 修改"网站名称"为"我的数据平台"
   - 修改"首页标题"为"欢迎使用数据平台"
   - 点击"保存设置"

2. **验证效果**
   - 刷新首页
   - 查看Hero区域标题是否更新

### 预期结果：
✅ 配置保存成功  
✅ 首页标题更新  
✅ 配置实时生效

---

## 3. 测试"我的内容"功能 (3分钟)

### 步骤：

1. **创建测试内容**
   - 登录普通用户账号
   - 点击"创建内容"
   - 选择"技术文章模板"
   - 填写标题和必填字段
   - 点击"保存草稿"

2. **查看我的内容**
   - 点击导航栏"我的内容"
   - 查看"全部"标签页，应该看到刚创建的草稿

3. **测试标签页切换**
   - 点击"草稿"标签页，应该看到草稿内容
   - 点击"待审核"标签页，应该为空
   - 点击"已发布"标签页，应该为空

4. **提交审核**
   - 在草稿列表中点击"提交审核"按钮
   - 确认提交
   - 切换到"待审核"标签页，应该看到刚提交的内容

5. **测试删除功能**
   - 创建另一个草稿
   - 在草稿列表中点击"删除"按钮
   - 确认删除
   - 验证草稿已被删除

### 预期结果：
✅ 内容创建成功  
✅ 标签页切换正常  
✅ 提交审核成功  
✅ 删除功能正常  
✅ 状态显示正确

---

## 4. 测试评论功能 (2分钟)

### 步骤：

1. **准备已发布内容**
   - 管理员登录
   - 进入"内容审核"
   - 批准一个待审核的内容
   - 用户登录后发布该内容

2. **查看内容详情**
   - 访问首页
   - 点击任意已发布的内容
   - 滚动到页面底部，找到评论区

3. **未登录状态测试**
   - 退出登录
   - 刷新内容详情页
   - 应该看到"登录后发表评论"提示
   - 可以查看已有评论（如果有）

4. **发表评论**
   - 登录账号
   - 在评论输入框输入测试评论
   - 点击"发表评论"
   - 等待评论发表成功

5. **验证评论显示**
   - 评论应该立即显示在列表顶部
   - 显示用户邮箱（脱敏）
   - 显示"刚刚"时间标记

6. **测试分页**
   - 发表10条以上评论
   - 验证分页功能是否正常

### 预期结果：
✅ 未登录可查看评论  
✅ 登录后可发表评论  
✅ 评论实时显示  
✅ 邮箱脱敏正确  
✅ 时间显示友好  
✅ 分页功能正常

---

## 5. 测试SEO和robots.txt (1分钟)

### 步骤：

1. **访问robots.txt**
   - 浏览器访问: http://localhost:8080/robots.txt
   - 查看内容是否正确

2. **测试AI API**
   - 访问: http://localhost:8080/api/ai/data/1
   - 应该返回JSON-LD格式的结构化数据

3. **验证访问控制**
   - 查看robots.txt中的Allow和Disallow规则
   - 验证规则是否符合预期

### 预期结果：
✅ robots.txt可访问  
✅ AI API返回正确数据  
✅ 访问控制规则正确

---

## 6. 完整流程测试 (5分钟)

### 场景：从注册到发布内容并收到评论

1. **用户注册**
   - 访问注册页面
   - 填写邮箱、手机、密码
   - 提交注册
   - 看到"等待审核"提示

2. **管理员审核**
   - 管理员登录
   - 进入"用户管理"
   - 批准新用户
   - 用户收到审核通过邮件（如果配置了邮件）

3. **用户创建内容**
   - 用户登录
   - 点击"创建内容"
   - 选择模板，填写内容
   - 保存草稿
   - 提交审核

4. **管理员审核内容**
   - 管理员进入"内容审核"
   - 批准内容
   - 用户收到审核通过通知

5. **用户发布内容**
   - 用户进入"我的内容"
   - 找到已批准的内容
   - 点击"发布"
   - 内容出现在首页

6. **其他用户评论**
   - 另一个用户登录
   - 访问该内容详情页
   - 发表评论
   - 评论显示成功

7. **导出内容**
   - 点击"导出"按钮
   - 选择JSON-LD格式
   - 下载文件
   - 验证文件内容

### 预期结果：
✅ 完整流程顺畅  
✅ 所有通知正常  
✅ 内容正确显示  
✅ 评论功能正常  
✅ 导出功能正常

---

## 7. 性能测试 (可选)

### 简单压力测试

使用Apache Bench测试API性能：

```bash
# 测试获取内容列表API
ab -n 1000 -c 100 http://localhost:8080/api/public/contents

# 测试获取内容详情API
ab -n 1000 -c 100 http://localhost:8080/api/public/content/1

# 测试获取评论API
ab -n 1000 -c 100 http://localhost:8080/api/public/comments/content/1
```

### 预期结果：
- 响应时间 < 200ms (P95)
- 无错误响应
- 系统稳定运行

---

## 8. 浏览器兼容性测试 (可选)

### 测试浏览器：
- [ ] Chrome (最新版)
- [ ] Firefox (最新版)
- [ ] Safari (最新版)
- [ ] Edge (最新版)

### 测试内容：
- [ ] 页面正常显示
- [ ] Logo正常加载
- [ ] 评论功能正常
- [ ] 文件上传正常
- [ ] 响应式布局正常

---

## 9. 移动端测试 (可选)

### 测试设备：
- [ ] iPhone (Safari)
- [ ] Android (Chrome)
- [ ] iPad (Safari)

### 测试内容：
- [ ] 页面自适应
- [ ] 触摸操作正常
- [ ] 文件上传正常
- [ ] 评论输入正常

---

## 常见问题排查

### 问题1: Logo上传失败

**可能原因**:
- 文件大小超过5MB
- 文件格式不支持
- 上传目录权限不足

**解决方法**:
```bash
# 检查上传目录
ls -la uploads/

# 创建目录并设置权限
mkdir -p uploads/system
chmod 755 uploads
```

### 问题2: 评论无法显示

**可能原因**:
- 数据库连接问题
- API请求失败
- 前端路由问题

**解决方法**:
```bash
# 检查后端日志
tail -f backend/logs/ai-data-platform.log

# 检查数据库
mysql -u dataelf -p ai_data_platform
SELECT * FROM comments;

# 检查浏览器控制台
# 打开浏览器开发者工具，查看Network和Console
```

### 问题3: 我的内容页面为空

**可能原因**:
- 用户未创建任何内容
- API认证失败
- 数据库查询问题

**解决方法**:
```bash
# 检查JWT令牌
# 在浏览器开发者工具 > Application > Local Storage
# 查看是否有token

# 检查数据库
SELECT * FROM contents WHERE user_id = YOUR_USER_ID;

# 检查API响应
# 浏览器开发者工具 > Network > 查看API请求
```

### 问题4: 系统配置不生效

**可能原因**:
- 缓存未清除
- 配置未保存
- 前端未刷新

**解决方法**:
```bash
# 清除Redis缓存
redis-cli
FLUSHALL

# 重启后端服务
docker-compose restart backend

# 强制刷新浏览器
# Ctrl+Shift+R (Windows/Linux)
# Cmd+Shift+R (Mac)
```

---

## 测试报告模板

### 测试环境
- 操作系统: _______________
- 浏览器: _______________
- 数据库版本: _______________
- 测试日期: _______________

### 测试结果

| 功能 | 测试结果 | 备注 |
|------|---------|------|
| Logo上传 | [ ] 通过 [ ] 失败 | |
| 系统配置 | [ ] 通过 [ ] 失败 | |
| 我的内容 | [ ] 通过 [ ] 失败 | |
| 评论功能 | [ ] 通过 [ ] 失败 | |
| SEO优化 | [ ] 通过 [ ] 失败 | |
| 完整流程 | [ ] 通过 [ ] 失败 | |

### 发现的问题
1. _______________________________________________
2. _______________________________________________
3. _______________________________________________

### 改进建议
1. _______________________________________________
2. _______________________________________________
3. _______________________________________________

---

## 下一步

测试完成后，可以：

1. **查看详细文档**
   - 阅读"新功能实现说明.md"
   - 阅读"开发完成总结.md"

2. **准备部署**
   - 查看"部署检查清单.md"
   - 配置生产环境

3. **继续开发**
   - 实现分享功能
   - 开发多级分类
   - 添加标签云管理

---

**祝测试顺利！** 🎉
