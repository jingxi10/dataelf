# 快速测试标签云管理

## 测试前准备

### 1. 启动服务
```bash
# 启动后端
cd backend
mvn spring-boot:run

# 启动前端
cd frontend
npm run dev
```

### 2. 登录管理员账号
- 访问: http://localhost:3000/login
- 使用管理员账号登录

---

## 测试步骤

### 测试1: 访问标签管理页面

1. 登录后进入管理后台
2. 点击左侧菜单"标签管理"
3. **预期结果**: 
   - 显示标签管理页面
   - 看到"创建标签"按钮
   - 看到标签云预览区域
   - 看到标签列表表格

---

### 测试2: 创建标签

1. 点击"创建标签"按钮
2. 输入标签名称: "人工智能"
3. 点击"创建"
4. **预期结果**:
   - 提示"标签创建成功"
   - 标签出现在列表中
   - 标签出现在标签云中
   - 使用次数为0

---

### 测试3: 批量创建标签

创建以下标签用于测试：
- "机器学习"
- "深度学习"
- "自然语言处理"
- "计算机视觉"
- "数据分析"
- "Python"
- "JavaScript"
- "前端开发"
- "后端开发"
- "数据库"

**预期结果**: 所有标签成功创建并显示

---

### 测试4: 标签云展示

1. 查看标签云预览区域
2. **预期结果**:
   - 所有标签以标签云形式展示
   - 标签大小根据使用量不同
   - 标签颜色根据使用量不同
   - 显示使用次数

**标签样式规则**:
- 使用量 >= 50: 大号红色
- 使用量 >= 30: 默认橙色
- 使用量 >= 10: 默认绿色
- 使用量 < 10: 小号灰色

---

### 测试5: 搜索标签

1. 在搜索框输入"学习"
2. **预期结果**:
   - 实时显示包含"学习"的标签
   - 显示"机器学习"和"深度学习"

3. 清空搜索框
4. **预期结果**:
   - 恢复显示所有标签

---

### 测试6: 排序功能

#### 按使用量排序
1. 点击"按使用量"按钮
2. **预期结果**: 使用量最多的标签在前

#### 按名称排序
1. 点击"按名称"按钮
2. **预期结果**: 标签按字母顺序排列

#### 按时间排序
1. 点击"按时间"按钮
2. **预期结果**: 最新创建的标签在前

---

### 测试7: 查看标签内容（需要先创建内容）

#### 准备工作
1. 创建一篇内容并添加标签"人工智能"
2. 发布该内容

#### 测试步骤
1. 在标签管理页面，点击标签云中的"人工智能"
2. **预期结果**:
   - 右侧打开抽屉
   - 显示标题"标签'人工智能'的内容"
   - 显示内容数量提示
   - 显示内容列表

3. 点击内容卡片
4. **预期结果**:
   - 跳转到内容详情页

---

### 测试8: 列表中查看内容

1. 在标签列表中找到"人工智能"标签
2. 点击"查看内容"按钮
3. **预期结果**:
   - 打开内容抽屉
   - 显示相关内容列表

---

### 测试9: 删除未使用的标签

1. 找到一个使用次数为0的标签
2. 点击"删除"按钮
3. 确认删除
4. **预期结果**:
   - 提示"标签删除成功"
   - 标签从列表中移除
   - 标签从标签云中移除

---

### 测试10: 尝试删除使用中的标签

1. 找到一个使用次数>0的标签
2. **预期结果**:
   - "删除"按钮被禁用
   - 鼠标悬停显示不可删除提示

---

### 测试11: 创建重复标签

1. 点击"创建标签"
2. 输入已存在的标签名称
3. 点击"创建"
4. **预期结果**:
   - 提示"标签已存在"
   - 创建失败

---

### 测试12: 表单验证

#### 测试空名称
1. 点击"创建标签"
2. 不输入名称，直接点击"创建"
3. **预期结果**: 提示"请输入标签名称"

#### 测试名称长度
1. 输入1个字符的名称
2. **预期结果**: 提示"长度在 2 到 50 个字符"

3. 输入超过50个字符的名称
4. **预期结果**: 自动限制在50字符

---

### 测试13: 标签云交互

1. 悬停在标签云的标签上
2. **预期结果**:
   - 标签向上浮动
   - 显示阴影效果

3. 点击标签
4. **预期结果**:
   - 打开内容抽屉
   - 显示该标签的相关内容

---

### 测试14: 刷新功能

1. 点击"刷新"按钮
2. **预期结果**:
   - 重新加载标签列表
   - 重新加载标签云
   - 显示最新数据

---

### 测试15: API接口测试

#### 公开接口
```bash
# 获取所有标签
curl http://localhost:8080/api/tags

# 获取热门标签
curl http://localhost:8080/api/tags/popular

# 获取指定标签
curl http://localhost:8080/api/tags/1

# 搜索标签
curl "http://localhost:8080/api/tags/search?keyword=学习"

# 根据标签搜索内容
curl "http://localhost:8080/api/tags/人工智能/contents?page=0&size=20"
```

#### 管理接口（需要管理员Token）
```bash
# 创建标签
curl -X POST http://localhost:8080/api/tags \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"name": "测试标签"}'

# 删除标签
curl -X DELETE http://localhost:8080/api/tags/1 \
  -H "Authorization: Bearer YOUR_TOKEN"
```

---

## 测试场景

### 场景1: 标签使用流程

1. **创建标签**: 管理员创建"区块链"标签
2. **内容关联**: 用户创建内容时添加"区块链"标签
3. **使用计数**: 标签使用次数自动+1
4. **标签云更新**: 标签在标签云中变大变色
5. **内容查看**: 点击标签查看相关内容
6. **内容删除**: 删除内容后使用次数-1

### 场景2: 标签管理流程

1. **批量创建**: 创建20个不同领域的标签
2. **搜索测试**: 搜索特定关键词
3. **排序测试**: 切换不同排序方式
4. **删除测试**: 删除未使用的标签
5. **保护测试**: 尝试删除使用中的标签

### 场景3: 标签云展示

1. **初始状态**: 所有标签大小相同（使用量为0）
2. **添加内容**: 为不同标签添加不同数量的内容
3. **观察变化**: 标签大小和颜色根据使用量变化
4. **热门标签**: 使用量最多的标签最显眼

---

## 性能测试

### 测试数据量
- 100个标签
- 每个标签关联10-50个内容
- 总计约2000个内容

### 性能指标
- 标签列表加载时间: < 300ms
- 标签云渲染时间: < 500ms
- 搜索响应时间: < 200ms
- 内容查询时间: < 500ms

---

## 常见问题

### Q1: 为什么不能删除某个标签？
**A**: 该标签正在被内容使用（使用次数>0）。需要先删除或移除所有使用该标签的内容。

### Q2: 标签云中的标签大小为什么不同？
**A**: 标签大小根据使用量动态调整，使用越多的标签越大。

### Q3: 如何让标签在标签云中更显眼？
**A**: 增加该标签的使用次数，创建更多使用该标签的内容。

### Q4: 标签搜索不到结果？
**A**: 检查搜索关键词是否正确，标签名称是否完全匹配。

### Q5: 标签云加载很慢？
**A**: 检查标签数量，建议限制在100个以内。可以使用分页或懒加载优化。

---

## 测试检查清单

- [ ] 创建标签
- [ ] 批量创建标签
- [ ] 标签云展示
- [ ] 标签大小和颜色调整
- [ ] 搜索标签
- [ ] 按使用量排序
- [ ] 按名称排序
- [ ] 按时间排序
- [ ] 查看标签内容
- [ ] 删除未使用标签
- [ ] 尝试删除使用中标签（应失败）
- [ ] 创建重复标签（应失败）
- [ ] 表单验证
- [ ] 标签云交互
- [ ] 刷新功能
- [ ] API接口测试
- [ ] 权限控制（非管理员不能创建/删除）
- [ ] 响应式布局（移动端）

---

## 测试结果记录

| 测试项 | 状态 | 备注 |
|--------|------|------|
| 创建标签 | ⏳ 待测试 | |
| 标签云展示 | ⏳ 待测试 | |
| 搜索功能 | ⏳ 待测试 | |
| 排序功能 | ⏳ 待测试 | |
| 查看内容 | ⏳ 待测试 | |
| 删除标签 | ⏳ 待测试 | |
| 删除保护 | ⏳ 待测试 | |
| 重复检查 | ⏳ 待测试 | |
| 表单验证 | ⏳ 待测试 | |
| 标签云交互 | ⏳ 待测试 | |
| API接口 | ⏳ 待测试 | |
| 权限控制 | ⏳ 待测试 | |
| 响应式布局 | ⏳ 待测试 | |

---

## 下一步

测试完成后：
1. 记录发现的问题
2. 提交bug报告
3. 验证修复
4. 进行回归测试
5. 准备上线

---

**测试负责人**: ___________  
**测试日期**: ___________  
**测试环境**: 开发环境  
**测试状态**: ⏳ 待测试
